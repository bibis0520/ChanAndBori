<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.chan.persistence.BoardDAO">
	
	<resultMap id="resultForBoardVo" type="com.chan.domain.BoardVO">
		<result column="bno" 		jdbcType="INTEGER" 	property="bno"/>
		<result column="title" 		jdbcType="VARCHAR" 	property="title"/>
		<result column="content" 	jdbcType="VARCHAR" 	property="content"/>
		<result column="writer" 	jdbcType="VARCHAR" 	property="writer"/>
		<result column="regdate" 	jdbcType="DATE" 	property="regdate"/>
		<result column="viewcnt" 	jdbcType="INTEGER" 	property="viewcnt"/>
	</resultMap>
	
<!-- 게시물 리스트 조회 -->	
	<select id="listPage" resultMap="resultForBoardVo">
		SELECT
			bno, title, content, writer, regdate, viewcnt
		FROM 
			tbl_board
		WHERE
			bno > 0
		ORDER BY
			bno DESC, regdate DESC
	</select>
	
<!-- 게시물 등록 -->
	<insert id="create">
		INSERT INTO tbl_board (title, content, writer) VALUES (#{title}, #{content}, #{writer})
	</insert>

<!-- 게시물 조회 -->	
	<select id="read" resultType="resultForBoardVo">
		SELECT 
			bno, title, content, writer, regdate, viewcnt 
		FROM
			tbl_board 
		WHERE 
			bno = #{bno}
	</select>

<!-- 게시물 수정 -->
	<update id="update">
		UPDATE 
			tbl_board 
		SET
			title = #{title}, content = #{content} 
		WHERE 
			bno = #{bno}  
	</update>
	
<!-- 게시물 삭제 -->
	<delete id="delete">
		DELETE FROM 
			tbl_board 
		WHERE
			bno = #{bno}
	</delete>
	
</mapper>

