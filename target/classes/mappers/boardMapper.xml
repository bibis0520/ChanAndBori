<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.chan.persistence.BoardDAO">

	<resultMap id="resultForBoardVo" type="com.chan.domain.BoardVO">
		<result column="BNO" 			jdbcType="INTEGER" 		property="bno"/>
		<result column="TITLE" 			jdbcType="VARCHAR" 		property="title"/>
		<result column="CONTENT" 		jdbcType="VARCHAR" 		property="content"/>
		<result column="REGI_USER_ID" 	jdbcType="VARCHAR" 		property="regiUserId"/>
		<result column="REGI_DATE" 		jdbcType="TIMESTAMP" 	property="regiDate"/>
		<result column="VIEW_CNT" 		jdbcType="INTEGER" 		property="viewCnt"/>
	</resultMap>

<!-- 게시물 리스트 조회 -->
	<select id="listPage" resultMap="resultForBoardVo">
		SELECT
			BNO, TITLE, CONTENT, REGI_USER_ID, REGI_DATE, VIEW_CNT
		FROM
			TBL_BOARD
		ORDER BY
			REGI_DATE DESC
	</select>

<!-- 게시물 등록 -->
	<insert id="create">
		INSERT INTO TBL_BOARD
                        (
                                BOARD_ID,
                                HRANK_BOARD_ID,
                                BNO,
                                SEQ,
                                TITLE,
                                CONTENT,
                                REGI_USER_ID,
                                REGI_DATE,
                                MODI_USER_ID,
                                MODI_DATE,
                                VIEW_CNT
                        )
		VALUES
                        (
                                FUNC_GET_SEQ_30(),
                                #{hrankBoardId},
                                #{bno},
                                #{seq},
                                #{title},
                                #{content},
                                #{regiUserId},
                                SYSDATE,
                                #{modiUserId},
                                SYSDATE,
                                0
                        )
	</insert>

<!-- 게시물 조회 -->
	<select id="read" resultMap="resultForBoardVo">
		SELECT
			BNO, TITLE, CONTENT, REGI_USER_ID, REGI_DATE, VIEW_CNT
		FROM
			TBL_BOARD
		WHERE
			BNO = #{bno}
	</select>

<!-- 게시물 수정 -->
	<update id="update">
		UPDATE
			TBL_BOARD
		SET
			TITLE = #{title}, CONTENT = #{content}
		WHERE
			BNO = #{bno}
	</update>

<!-- 게시물 삭제 -->
	<delete id="delete">
		DELETE FROM
			TBL_BOARD
		WHERE
			BNO = #{bno}
	</delete>

</mapper>

